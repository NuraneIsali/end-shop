(function(c) {
    function d(a, b) {
        this.el = a;
        this.config = {
            speed: c.fx.speed,
            easing: "linear",
            cssPrefix: "",
            afterOpen: function() {},
            afterClose: function() {}
        };
        b = b || {};
        c.extend(this.config, b);
        this.activeClass = this.config.cssPrefix + "active";
        this.nav = this.el.find("." + this.config.cssPrefix + "tabs-nav");
        this.tabsContainer = this.el.find("." + this.config.cssPrefix + "tabs-container");
        this.tabs = this.tabsContainer.find("." + this.config.cssPrefix + "tab");
        this.tabLinkClass = this.config.cssPrefix + "tab-link";
        this.toDefaultState();
        this.bindEvents()
    }
    var e = c(document);
    d.prototype.toDefaultState = function() {
        var a = this.nav.find("." + this.activeClass);
        a.length || (a = this.nav.find("li").first(), a.addClass(this.activeClass));
        a = c(a.children("." + this.tabLinkClass).attr("href"));
        a.length && (this.tabsContainer.css({
            position: "relative"
        }), this.tabs.css({
            position: "absolute",
            top: 0,
            left: 0,
            width: "100%"
        }), this.tabs.not(a).css({
            opacity: 0,
            visibility: "hidden"
        }), this.openTab(a))
    };
    d.prototype.bindEvents = function() {
        var a = this;
        this.nav.on("click", "." + this.tabLinkClass, {
            self: this
        }, function(a) {
            a.preventDefault();
            var b = c(this);
            a = a.data.self;
            var d = c(b.attr("href"));
            if (b.parent().hasClass(a.activeClass)) return !1;
            b.attr("aria-selected", "true").parent().addClass(a.activeClass).siblings().removeClass(a.activeClass).children("." + a.tabLinkClass).attr("aria-selected", "false");
            d.length && a.openTab(d)
        });
        c(window).on("resize.tabs", function() {
            a.updateContainer()
        })
    };
    d.prototype.updateContainer = function() {
        var a = this;
        a.timeOutId && clearTimeout(a.timeOutId);
        a.timeOutId = setTimeout(function() {
            var b =
                a.tabsContainer.find("." + a.activeClass).outerHeight();
            a.tabsContainer.stop().animate({
                height: b
            }, {
                complete: function() {
                    clearTimeout(a.timeOutId);
                    e.trigger("container.updated.mokeysan.tabs", [c(this)])
                },
                duration: a.config.speed,
                easing: a.config.easing
            })
        }, 100)
    };
    d.prototype.openTab = function(a) {
        var b = this,
            d = a.outerHeight(),
            f = a.siblings("." + this.activeClass);
        f.length && this.closeTab(f);
        a.addClass(this.activeClass).siblings().removeClass(this.activeClass);
        this.tabsContainer.stop().animate({
            height: d
        }, {
            duration: b.config.speed,
            easing: b.config.easing,
            complete: function() {
                e.trigger("container.updated.mokeysan.tabs", [c(this)])
            }
        });
        a.css("visibility", "visible").stop().animate({
            opacity: 1
        }, {
            complete: function() {
                b.config.afterOpen.call(c(this))
            },
            duration: b.config.speed,
            easing: b.config.easing
        })
    };
    d.prototype.closeTab = function(a) {
        var b = this;
        a.stop().animate({
            opacity: 0
        }, {
            complete: function() {
                var a = c(this);
                a.css("visibility", "hidden");
                b.config.afterClose.call(a)
            },
            duration: b.config.speed,
            easing: b.config.easing
        })
    };
    c.fn.MonkeysanTabs = function(a) {
        return this.each(function() {
            var b =
                c(this);
            b.data("tabs") || b.data("tabs", new d(b, a))
        })
    }
})(jQuery);